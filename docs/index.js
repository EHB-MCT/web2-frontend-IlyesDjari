/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ (() => {

eval("\r\n\r\nconst baseURL = \"https://otomusic.herokuapp.com\";\r\nlet CHOICES = [];\r\n\r\n\r\ndocument.documentElement.addEventListener(\"load\", function() {\r\n\tdocument.getElementById(\"loader\").style.display = \"block\";\r\n\r\n});\r\n\r\nwindow.addEventListener(\"load\", function() {\r\n\tgetReleases();\r\n\tuser();\r\n\tlatestPlaylists();\r\n\tdocument.getElementById(\"loader\").style.display = \"none\";\r\n});\r\n\r\nasync function getReleases() {\r\n\tawait fetch(baseURL + \"/newreleases\")\r\n\t\t.then((response) => response.json())\r\n\t\t.then((data) => {\r\n\t\t\tfor (let i = 0; i < 5; i++) {\r\n\t\t\t\tdocument.getElementById(\"release\").insertAdjacentHTML('afterbegin', `\r\n        <a href=\"${data.body.albums.items[i].external_urls.spotify}\" target=\"_blank\">\r\n        <div>\r\n        <img src=\"${data.body.albums.items[i].images[0].url}\" alt=\"cover\">\r\n        <h3>${data.body.albums.items[i].artists[0].name}</h3>\r\n        <p>${data.body.albums.items[i].name}</p>\r\n        </div>\r\n        </a>`);\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\nasync function latestPlaylists() {\r\n    console.log(\"gghello\");\r\n    await fetch(baseURL + \"/allgenerated\")\r\n    .then((response) => response.json())\r\n    .then((data) => {\r\n        console.log(\"Received data\", data);\r\n        for(let i = 0; i<data.length; i++) {\r\n        document.getElementById(\"latestgenerated\").insertAdjacentHTML('afterbegin', `\r\n\t\t<a href=\"${data[i].external_urls.spotify}\" target=\"_blank\">\r\n        <div id=\"lastestplaylistadded\">\r\n        <img src=\"${data[i].images[0].url}\" alt=\"\">\r\n\t\t<div id=\"lastestplaylistaddedtxt\">\r\n\t\t<h2>${data[i].name}</h2>\r\n\t\t<p>${data[i].owner.display_name}</p>\r\n\t\t</div>\r\n        </div>\r\n\t\t</a>`);\r\n    }\r\n      });\r\n}\r\n\r\nsetInterval(async function current() {\r\n\tawait fetch(baseURL + \"/currentsong\")\r\n\t\t.then((response) => response.json())\r\n\t\t.then((data) => {\r\n\t\t\tif (data.body.item != null) {\r\n\t\t\t\tdocument.getElementById(\"imgcurrent\").src = data.body.item.album.images[0].url;\r\n\t\t\t\tdocument.getElementById(\"artistcurrent\").innerHTML = data.body.item.artists[0].name;\r\n\t\t\t\tdocument.getElementById(\"songcurrent\").innerHTML = data.body.item.name;\r\n\t\t\t\tdocument.getElementById(\"imgcurrent\").style.margin = \"0\";\r\n\t\t\t\tdocument.getElementById(\"imgcurrent\").style.width = \"10vw\";\r\n\t\t\t\tdocument.getElementById(\"imgcurrent\").style.opacity = \"100%\";\r\n\t\t\t}\r\n\t\t});\r\n}, 1000)\r\n\r\n\r\nasync function user() {\r\n\tawait fetch(baseURL + \"/getuser\")\r\n\t\t.then((response) => response.json())\r\n\t\t.then((data) => {\r\n\t\t\tconst time = new Date().getHours();\r\n\t\t\tdocument.getElementById(\"username\").innerHTML = data.body.display_name;\r\n\t\t\tdocument.getElementById(\"userpicture\").src = data.body.images[0].url\r\n\t\t\tdocument.getElementById('toProfile').setAttribute(\"href\", data.body.external_urls.spotify);\r\n\t\t\tif (time < 12) {\r\n\t\t\t\tdocument.getElementById(\"daytime\").innerHTML = \"Good morning, \"\r\n\t\t\t} else if (time < 18) {\r\n\t\t\t\tdocument.getElementById(\"daytime\").innerHTML = \"Good afternoon, \"\r\n\t\t\t} else {\r\n\t\t\t\tdocument.getElementById(\"daytime\").innerHTML = \"Good evening, \"\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\n\r\nfunction handleClick(event) {\r\n\tlet buttonValue = event.target.parentElement.id;\r\n\tif (CHOICES[0] == undefined) {\r\n\t\tdocument.getElementById('genretxt').innerHTML = `${buttonValue}`;\r\n\t\tgenre();\r\n\t\tCHOICES.push(buttonValue);\r\n\t} else if (CHOICES[0] !== undefined && CHOICES[1] == undefined && CHOICES[2] == undefined) {\r\n\t\tdocument.getElementById('moodtxt').innerHTML = `${buttonValue}`;\r\n\t\tif (buttonValue == \"chill\") {\r\n\t\t\tlet energy = Math.ceil(Math.random() * 33)\r\n\t\t\tCHOICES.push(energy);\r\n\t\t} else if (buttonValue == \"party\") {\r\n\t\t\tlet energy = Math.ceil(Math.random() * (66 - 33) + 33)\r\n\t\t\tCHOICES.push(energy);\r\n\t\t} else if (buttonValue == \"energetic\") {\r\n\t\t\tlet energy = Math.ceil(Math.random() * (100 - 66) + 66)\r\n\t\t\tCHOICES.push(energy);\r\n\t\t}\r\n\t\tmood();\r\n\r\n\t} else {\r\n\t\tdocument.getElementById('knowntxt').innerHTML = `${buttonValue}`;\r\n\t\tif (buttonValue == \"indie\") {\r\n\t\t\tlet popularity = Math.ceil(Math.random() * 33)\r\n\t\t\tCHOICES.push(popularity);\r\n\t\t} else if (buttonValue == \"mixed\") {\r\n\t\t\tlet popularity = Math.ceil(Math.random() * (66 - 33) + 33)\r\n\t\t\tCHOICES.push(popularity);\r\n\t\t} else if (buttonValue == \"trending\") {\r\n\t\t\tlet popularity = Math.ceil(Math.random() * (100 - 66) + 66)\r\n\t\t\tCHOICES.push(popularity);\r\n\t\t}\r\n\t\tshowName();\r\n\t}\r\n}\r\ndocument.querySelector(\"#choices\").addEventListener(\"click\", handleClick);\r\ndocument.querySelector(\"#choicesmood\").addEventListener(\"click\", handleClick);\r\ndocument.querySelector(\"#choicespopularity\").addEventListener(\"click\", handleClick);\r\ndocument.querySelector(\"#back\").addEventListener(\"click\", back);\r\n\r\n\r\nfunction back() {\r\n\tif (CHOICES[1] == undefined) {\r\n\t\t// Choice of doing this way instead of simple window reload for good looking transitions incorporation\r\n\t\tCHOICES.pop();\r\n\t\tdocument.getElementById(\"choices\").style.display = \"flex\";\r\n\t\tdocument.getElementById(\"back\").style.display = \"none\";\r\n\t\tdocument.getElementById(\"lengthtimeline\").style.backgroundColor = \"#1DB954\";\r\n\t\tdocument.getElementById(\"lengthtimeline\").style.width = \"6.5vw\";\r\n\t\tdocument.getElementById(\"genre\").style.transform = \"scale(1.1)\";\r\n\t\tdocument.getElementById(\"mood\").style.transform = \"scale(1)\";\r\n\t\tdocument.getElementById(\"genre\").style.backgroundColor = \"#1DB954\";\r\n\t\tdocument.getElementById(\"mood\").style.backgroundColor = \"#262626\";\r\n\t\tdocument.getElementById(\"moodimg\").style.opacity = \"0.5\";\r\n\t\tdocument.getElementById(\"choicesmood\").style.display = \"none\";\r\n\t\tdocument.getElementById(\"generate\").style.display = \"flex\";\r\n\t\tdocument.getElementById('genretxt').innerHTML = \"Genre\";\r\n\r\n\r\n\r\n\t} else if (CHOICES[0] !== undefined && CHOICES[1] !== undefined && CHOICES[2] == undefined) {\r\n\t\tCHOICES.pop();\r\n\t\tdocument.getElementById(\"choicesmood\").style.display = \"flex\";\r\n\t\tdocument.getElementById(\"lengthtimeline\").style.backgroundColor = \"#A065FF\";\r\n\t\tdocument.getElementById(\"lengthtimeline\").style.width = \"22.5vw\";\r\n\t\tdocument.getElementById(\"mood\").style.transform = \"scale(1.1)\";\r\n\t\tdocument.getElementById(\"popularity\").style.transform = \"scale(1)\";\r\n\t\tdocument.getElementById(\"genre\").style.backgroundColor = \"#1DB954\";\r\n\t\tdocument.getElementById(\"popularity\").style.backgroundColor = \"#262626\";\r\n\t\tdocument.getElementById(\"popularityimg\").style.opacity = \"0.5\";\r\n\t\tdocument.getElementById(\"choicespopularity\").style.display = \"none\";\r\n\t\tdocument.getElementById('backtxt').innerText = \"Back to genre\";\r\n\t\tdocument.getElementById('genretxt').innerHTML = \"Genre\";\r\n\t} else {\r\n\t\tCHOICES.pop();\r\n\t\tdocument.getElementById(\"choicespopularity\").style.display = \"flex\";\r\n\t\tdocument.getElementById(\"lengthtimeline\").style.backgroundColor = \"#FF7448\";\r\n\t\tdocument.getElementById(\"lengthtimeline\").style.width = \"40vw\";\r\n\t\tdocument.getElementById(\"popularity\").style.transform = \"scale(1.1)\";\r\n\t\tdocument.getElementById(\"playlist\").style.transform = \"scale(1)\";\r\n\t\tdocument.getElementById(\"playlist\").style.backgroundColor = \"#262626\";\r\n\t\tdocument.getElementById(\"playlistimg\").style.opacity = \"0.5\";\r\n\t\tdocument.getElementById(\"choosename\").style.display = \"none\";\r\n\t\tdocument.getElementById('backtxt').innerText = \"Back to mood\";\r\n\t}\r\n}\r\n\r\nfunction genre() {\r\n\tdocument.getElementById(\"choices\").style.display = \"none\";\r\n\tdocument.getElementById(\"back\").style.display = \"flex\";\r\n\tdocument.getElementById(\"lengthtimeline\").style.backgroundColor = \"#A065FF\";\r\n\tdocument.getElementById(\"lengthtimeline\").style.width = \"22.5vw\";\r\n\tdocument.getElementById(\"genre\").style.transform = \"scale(1)\";\r\n\tdocument.getElementById(\"mood\").style.transform = \"scale(1.1)\";\r\n\tdocument.getElementById(\"mood\").style.backgroundColor = \"#A065FF\";\r\n\tdocument.getElementById(\"moodimg\").style.opacity = \"1\";\r\n\tdocument.getElementById(\"choicesmood\").style.display = \"flex\";\r\n\tdocument.getElementById(\"generate\").style.display = \"none\";\r\n\t\r\n}\r\n\r\nfunction mood() {\r\n\tdocument.getElementById(\"choicesmood\").style.display = \"none\";\r\n\tdocument.getElementById(\"lengthtimeline\").style.backgroundColor = \"#FF7448\";\r\n\tdocument.getElementById(\"lengthtimeline\").style.width = \"40vw\";\r\n\tdocument.getElementById(\"mood\").style.transform = \"scale(1)\";\r\n\tdocument.getElementById(\"popularity\").style.transform = \"scale(1.1)\";\r\n\tdocument.getElementById(\"popularity\").style.backgroundColor = \"#FF7448\";\r\n\tdocument.getElementById(\"choicespopularity\").style.display = \"flex\";\r\n\tdocument.getElementById(\"popularityimg\").style.opacity = \"1\";\r\n\tdocument.getElementById('backtxt').innerText = \"Back to mood\";\r\n}\r\n\r\nasync function popularity(res) {\r\n\tconst playlistid = res.body.id;\r\n\r\n\tconst obj = {\r\n\t\tlimit: 20,\r\n\t\tmarket: \"BE\",\r\n\t\tseed_genres: CHOICES[0],\r\n\t\ttarget_energy: CHOICES[1],\r\n\t\ttarget_popularity: CHOICES[2]\r\n\t}\r\n\r\n\tawait fetch(baseURL + '/featured', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tmode: 'cors',\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(obj)\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\tplaylistgenerator(playlistid);\r\n}\r\n\r\nasync function playlistgenerator(playlistid) {\r\n\tconst songs = []\r\n\r\n\tawait fetch(baseURL + \"/lastfeatured\")\r\n\t\t.then((response) => response.json())\r\n\t\t.then((data) => {\r\n\t\t\tfor (let i = 0; i < 20; i++) {\r\n\t\t\t\tsongs.push(data.bodycode[i].uri);\r\n\t\t\t}\r\n\r\n\t\t\tlet create = {\r\n\t\t\t\tplaylistid: playlistid,\r\n\t\t\t\tsongs: songs\r\n\t\t\t}\r\n\t\t\taddtoserver(create);\r\n\t\t});\r\n}\r\n\r\nasync function addtoserver(create) {\r\n\tawait fetch(baseURL + '/addtoplaylist', {\r\n\t\t\tmethod: 'POST',\r\n\t\t\tmode: 'cors',\r\n\t\t\theaders: {\r\n\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t},\r\n\t\t\tbody: JSON.stringify(create)\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\twindow.location = \"https://ehb-mct.github.io/web2-frontend-IlyesDjari/pages/custom-playlist.html\"\r\n}\r\n\r\n\r\n\r\nfunction showName() {\r\n\tdocument.getElementById(\"choicespopularity\").style.display = \"none\";\r\n\tdocument.getElementById(\"lengthtimeline\").style.backgroundColor = \"#1DB954\";\r\n\tdocument.getElementById(\"lengthtimeline\").style.width = \"57.5vw\";\r\n\tdocument.getElementById(\"popularity\").style.transform = \"scale(1)\";\r\n\tdocument.getElementById(\"playlist\").style.transform = \"scale(1.1)\";\r\n\tdocument.getElementById(\"playlist\").style.backgroundColor = \"#1DB954\";\r\n\tdocument.getElementById(\"playlistimg\").style.opacity = \"1\";\r\n\tdocument.getElementById(\"choosename\").style.display = \"flex\";\r\n\tdocument.getElementById('backtxt').innerText = \"Back to known\";\r\n\tdocument.getElementById(\"submitname\").addEventListener(\"click\", async function(event) {\r\n\t\tevent.preventDefault();\r\n\t\tconst name = document.getElementById(\"name\").value;\r\n\t\tconst create = {\r\n\t\t\t\"name\": name\r\n\t\t}\r\n\t\tawait fetch(baseURL + '/create', {\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\tmode: 'cors',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\t'Accept': 'application/json',\r\n\t\t\t\t\t'Content-Type': 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify(create)\r\n\t\t\t})\r\n\t\t\t.then(res => res.json())\r\n\t\t\t.then(res => popularity(res))\r\n\t})\r\n}\n\n//# sourceURL=webpack://web2-frontend-ilyesdjari/./src/index.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = {};
/******/ 	__webpack_modules__["./src/index.js"]();
/******/ 	
/******/ })()
;